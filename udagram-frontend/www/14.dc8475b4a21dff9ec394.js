(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{L6id:function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=function(){return function(){}}(),o=t("gIcY"),i=t("Ip0R"),r=t("oBZk"),a=t("ZZ/e"),c=t("mrSG"),s=t("26FU"),b=t("yZrb"),p=function(){function n(n){this.api=n,this.currentFeed$=new s.a([])}return n.prototype.getFeed=function(){return c.__awaiter(this,void 0,void 0,(function(){var n;return c.__generator(this,(function(l){switch(l.label){case 0:return[4,this.api.get("/feed")];case 1:return n=l.sent(),this.currentFeed$.next(n.rows),[2,Promise.resolve(this.currentFeed$)]}}))}))},n.prototype.uploadFeedItem=function(n,l){return c.__awaiter(this,void 0,void 0,(function(){var t,u;return c.__generator(this,(function(e){switch(e.label){case 0:return[4,this.api.upload("/feed",l,{caption:n,url:l.name})];case 1:return t=e.sent(),u=[t].concat(this.currentFeed$.value),this.currentFeed$.next(u),[2,t]}}))}))},n.ngInjectableDef=u.Yb({factory:function(){return new n(u.Zb(b.a))},token:n,providedIn:"root"}),n}(),d=function(){function n(n,l,t,u){this.feed=n,this.formBuilder=l,this.loadingController=t,this.modalController=u}return n.prototype.ngOnInit=function(){this.uploadForm=this.formBuilder.group({caption:new o.c("",o.n.required)})},n.prototype.setPreviewDataUrl=function(n){var l=this,t=new FileReader;t.onloadend=function(){l.previewDataUrl=t.result},t.readAsDataURL(n)},n.prototype.selectImage=function(n){var l=n.srcElement.files;l&&(this.file=l[0],this.setPreviewDataUrl(this.file))},n.prototype.onSubmit=function(n){var l=this;n.preventDefault(),this.loadingController.create(),this.uploadForm.valid&&this.file&&this.feed.uploadFeedItem(this.uploadForm.controls.caption.value,this.file).then((function(n){l.modalController.dismiss(),l.loadingController.dismiss()}))},n.prototype.cancel=function(){this.modalController.dismiss()},n}(),f=u.zb({encapsulation:0,styles:[[""]],data:{}});function g(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,0,"img",[["style","width:50px; height: 50px;"]],[[8,"src",4]],null,null,null,null))],null,(function(n,l){n(l,0,0,l.component.previewDataUrl)}))}function m(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,1,"a",[["color","secondary"],["ion-button",""]],null,null,null,null,null)),(n()(),u.Sb(-1,null,[" Select a Photo "]))],null,null)}function h(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,28,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,t){var e=!0,o=n.component;return"submit"===l&&(e=!1!==u.Mb(n,2).onSubmit(t)&&e),"reset"===l&&(e=!1!==u.Mb(n,2).onReset()&&e),"submit"===l&&(e=!1!==o.onSubmit(t)&&e),e}),null,null)),u.Ab(1,16384,null,0,o.r,[],null,null),u.Ab(2,540672,null,0,o.e,[[8,null],[8,null]],{form:[0,"form"]},null),u.Pb(2048,null,o.a,null,[o.e]),u.Ab(4,16384,null,0,o.k,[[4,o.a]],null,null),(n()(),u.Sb(-1,null,["` "])),(n()(),u.Bb(6,0,null,null,5,"label",[],null,null,null,null,null)),(n()(),u.Bb(7,0,null,null,0,"input",[["accept","image/*"],["style","display:none"],["type","file"]],null,[[null,"change"]],(function(n,l,t){var u=!0;return"change"===l&&(u=!1!==n.component.selectImage(t)&&u),u}),null,null)),(n()(),u.qb(16777216,null,null,1,null,g)),u.Ab(9,16384,null,0,i.j,[u.W,u.S],{ngIf:[0,"ngIf"]},null),(n()(),u.qb(16777216,null,null,1,null,m)),u.Ab(11,16384,null,0,i.j,[u.W,u.S],{ngIf:[0,"ngIf"]},null),(n()(),u.Bb(12,0,null,null,13,"ion-item",[],null,null,null,r.F,r.k)),u.Ab(13,49152,null,0,a.E,[u.j,u.p],null,null),(n()(),u.Bb(14,0,null,0,2,"ion-label",[["color","primary"],["position","floating"]],null,null,null,r.G,r.m)),u.Ab(15,49152,null,0,a.K,[u.j,u.p],{color:[0,"color"],position:[1,"position"]},null),(n()(),u.Sb(-1,0,["Caption"])),(n()(),u.Bb(17,0,null,0,8,"ion-input",[["formControlName","caption"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var e=!0;return"ionBlur"===l&&(e=!1!==u.Mb(n,20)._handleBlurEvent()&&e),"ionChange"===l&&(e=!1!==u.Mb(n,20)._handleInputEvent(t.target.value)&&e),e}),r.D,r.j)),u.Ab(18,16384,null,0,o.m,[],{required:[0,"required"]},null),u.Pb(1024,null,o.g,(function(n){return[n]}),[o.m]),u.Ab(20,16384,null,0,a.Ib,[u.p],null,null),u.Pb(1024,null,o.h,(function(n){return[n]}),[a.Ib]),u.Ab(22,671744,null,0,o.d,[[3,o.a],[6,o.g],[8,null],[6,o.h],[2,o.q]],{name:[0,"name"]},null),u.Pb(2048,null,o.i,null,[o.d]),u.Ab(24,16384,null,0,o.j,[[4,o.i]],null,null),u.Ab(25,49152,null,0,a.D,[u.j,u.p],{required:[0,"required"],type:[1,"type"]},null),(n()(),u.Bb(26,0,null,null,2,"ion-button",[["color","primary"],["type","submit"]],null,null,null,r.v,r.b)),u.Ab(27,49152,null,0,a.h,[u.j,u.p],{color:[0,"color"],disabled:[1,"disabled"],type:[2,"type"]},null),(n()(),u.Sb(-1,0,[" Post "]))],(function(n,l){var t=l.component;n(l,2,0,t.uploadForm),n(l,9,0,t.previewDataUrl),n(l,11,0,!t.previewDataUrl),n(l,15,0,"primary","floating"),n(l,18,0,""),n(l,22,0,"caption"),n(l,25,0,"","text"),n(l,27,0,"primary",!t.uploadForm.valid||!t.file,"submit")}),(function(n,l){n(l,0,0,u.Mb(l,4).ngClassUntouched,u.Mb(l,4).ngClassTouched,u.Mb(l,4).ngClassPristine,u.Mb(l,4).ngClassDirty,u.Mb(l,4).ngClassValid,u.Mb(l,4).ngClassInvalid,u.Mb(l,4).ngClassPending),n(l,17,0,u.Mb(l,18).required?"":null,u.Mb(l,24).ngClassUntouched,u.Mb(l,24).ngClassTouched,u.Mb(l,24).ngClassPristine,u.Mb(l,24).ngClassDirty,u.Mb(l,24).ngClassValid,u.Mb(l,24).ngClassInvalid,u.Mb(l,24).ngClassPending)}))}function v(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,1,"app-feed-upload",[],null,null,null,h,f)),u.Ab(1,114688,null,0,d,[p,o.b,a.Cb,a.Db],null,null)],(function(n,l){n(l,1,0)}),null)}var y=u.xb("app-feed-upload",d,v,{},{},[]),w=t("pMnS"),C=t("N/25"),I=function(){function n(n,l){this.modalController=n,this.auth=l}return n.prototype.ngOnInit=function(){var n=this;this.auth.currentUser$.subscribe((function(l){n.isLoggedIn=null!==l}))},n.prototype.ngOnDestroy=function(){this.loginSub&&this.loginSub.unsubscribe()},n.prototype.presentUploadForm=function(n){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(n){switch(n.label){case 0:return[4,this.modalController.create({component:d})];case 1:return[4,n.sent().present()];case 2:return[2,n.sent()]}}))}))},n}(),A=u.zb({encapsulation:0,styles:[[""]],data:{}});function B(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,2,"ion-button",[["color","primary"],["type","submit"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.presentUploadForm(t)&&u),u}),r.v,r.b)),u.Ab(1,49152,null,0,a.h,[u.j,u.p],{color:[0,"color"],disabled:[1,"disabled"],type:[2,"type"]},null),(n()(),u.Sb(-1,0,[" Create a New Post\n"]))],(function(n,l){n(l,1,0,"primary",!l.component.isLoggedIn,"submit")}),null)}var x=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),M=u.zb({encapsulation:0,styles:[[".photo-card[_ngcontent-%COMP%]{max-width:500px;overflow:hidden;background:var(--ion-color-primary-contrast);margin:30px 0}.photo-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:532px;overflow:hidden;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}"]],data:{}});function F(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,7,"ion-card",[["class","photo-card"]],null,null,null,r.y,r.d)),u.Ab(1,49152,null,0,a.j,[u.j,u.p],null,null),(n()(),u.Bb(2,0,null,0,1,"ion-img",[],null,null,null,r.C,r.i)),u.Ab(3,49152,null,0,a.A,[u.j,u.p],{src:[0,"src"]},null),(n()(),u.Bb(4,0,null,0,3,"ion-card-content",[],null,null,null,r.x,r.e)),u.Ab(5,49152,null,0,a.k,[u.j,u.p],null,null),(n()(),u.Bb(6,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Sb(7,null,["",""]))],(function(n,l){n(l,3,0,l.component.feedItem.url)}),(function(n,l){n(l,7,0,l.component.feedItem.caption)}))}function U(n){return u.Ub(2,[(n()(),u.qb(16777216,null,null,1,null,F)),u.Ab(1,16384,null,0,i.j,[u.W,u.S],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,1,0,l.component.feedItem)}),null)}var _=function(){function n(n){this.feed=n,this.subscriptions=[]}return n.prototype.ngOnInit=function(){return c.__awaiter(this,void 0,void 0,(function(){var n=this;return c.__generator(this,(function(l){switch(l.label){case 0:return this.subscriptions.push(this.feed.currentFeed$.subscribe((function(l){n.feedItems=l}))),[4,this.feed.getFeed()];case 1:return l.sent(),[2]}}))}))},n.prototype.ngOnDestroy=function(){for(var n=0,l=this.subscriptions;n<l.length;n++)l[n].unsubscribe()},n}(),k=u.zb({encapsulation:0,styles:[[".feed[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;background:var(--ion-color-light-tint)}"]],data:{}});function D(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,1,"app-feed-item",[],null,null,null,U,M)),u.Ab(1,114688,null,0,x,[],{feedItem:[0,"feedItem"]},null)],(function(n,l){n(l,1,0,l.context.$implicit)}),null)}function P(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,2,"div",[["class","feed"]],null,null,null,null,null)),(n()(),u.qb(16777216,null,null,1,null,D)),u.Ab(2,278528,null,0,i.i,[u.W,u.S,u.x],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,2,0,l.component.feedItems)}),null)}var j=t("AytR"),K=function(){return function(){this.appName=j.a.appName}}(),S=u.zb({encapsulation:0,styles:[[""]],data:{}});function q(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,5,"ion-content",[],null,null,null,r.z,r.f)),u.Ab(1,49152,null,0,a.r,[u.j,u.p],null,null),(n()(),u.Bb(2,0,null,0,1,"app-feed-upload-button",[],null,null,null,B,A)),u.Ab(3,245760,null,0,I,[a.Db,C.a],null,null),(n()(),u.Bb(4,0,null,0,1,"app-feed-list",[],null,null,null,P,k)),u.Ab(5,245760,null,0,_,[p],null,null)],(function(n,l){n(l,3,0),n(l,5,0)}),null)}function O(n){return u.Ub(0,[(n()(),u.Bb(0,0,null,null,1,"app-home",[],null,null,null,q,S)),u.Ab(1,49152,null,0,K,[],null,null)],null,null)}var $=u.xb("app-home",K,O,{},{},[]),z=function(){return function(){}}(),N=t("ZYCi");t.d(l,"HomePageModuleNgFactory",(function(){return Z}));var Z=u.yb(e,[],(function(n){return u.Jb([u.Kb(512,u.m,u.jb,[[8,[y,w.a,$]],[3,u.m],u.D]),u.Kb(4608,i.l,i.k,[u.z,[2,i.r]]),u.Kb(4608,o.p,o.p,[]),u.Kb(4608,a.a,a.a,[u.F,u.g]),u.Kb(4608,a.Db,a.Db,[a.a,u.m,u.w,i.d]),u.Kb(4608,a.Gb,a.Gb,[a.a,u.m,u.w,i.d]),u.Kb(4608,o.b,o.b,[]),u.Kb(4608,p,p,[b.a]),u.Kb(1073742336,i.c,i.c,[]),u.Kb(1073742336,o.o,o.o,[]),u.Kb(1073742336,o.f,o.f,[]),u.Kb(1073742336,a.Ab,a.Ab,[]),u.Kb(1073742336,o.l,o.l,[]),u.Kb(1073742336,z,z,[]),u.Kb(1073742336,N.o,N.o,[[2,N.t],[2,N.m]]),u.Kb(1073742336,e,e,[]),u.Kb(1024,N.k,(function(){return[[{path:"",component:K}]]}),[])])}))}}]);